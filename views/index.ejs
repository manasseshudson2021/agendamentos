<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>
    <%= title %>
  </title>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="stylesheet" href="/../bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="/../bower_components/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/../bower_components/Ionicons/css/ionicons.min.css">
  <link rel="stylesheet" href="/../dist/css/AdminLTE.min.css">
  <link rel="stylesheet" href="/../bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
  <link rel="stylesheet" href="/../dist/css/skins/skin-blue.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

  <style>
    .status {
      min-width: 35%;
    }

    .btn.btn-flat {
      border-radius: 0;
      -webkit-box-shadow: none;
      -moz-box-shadow: none;
      box-shadow: none;
      border-width: 1px;
      min-width: 35%;
    }
  </style>

</head>

<body class="hold-transition skin-blue sidebar-mini">
  <div class="wrapper">
    <header class="main-header">
      <a href="index2.html" class="logo">
        <span class="logo-mini"><b>A</b>LT</span>
        <span class="logo-lg"><b><%= name %></span>
      </a>
      <nav class="navbar navbar-static-top" role="navigation">
        <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
          <span class="sr-only">Toggle navigation</span>
        </a>
        <div class="navbar-custom-menu">
        </div>
      </nav>
    </header>

    <aside class="main-sidebar">
      <section class="sidebar">

        <div class="user-panel">
          <div class="pull-left image">
            <img src="./image/user.png" class="img-circle" alt="User Image">
          </div>
          <div class="pull-left info">
            <p><%= Cnpj %></p>
            <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
          </div>
        </div>

        <ul class="sidebar-menu" data-widget="tree">
          <li class="header">HEADER</li>
          <li class="active"><a href="/index"><i class="fa fa-link"></i> <span>Principal</span></a></li>
          <!--<li><a href="#"><i class="fa fa-link"></i> <span>Solicitações</span></a></li>-->
          <li><a href="/clientes"><i class="fa fa-link"></i> <span>Clientes</span></a></li>
          <li><a href="/funcionarios"><i class="fa fa-link"></i> <span>Funcionarios</span></a></li>
		  <li><a href="/"><i class="fa fa-link"></i> <span>Sair</span></a></li>
        </ul>
      </section>
    </aside>

    <div class="content-wrapper">
      <section class="content-header">
        <h1>Dashboard</h1> <div>Próxima Atualização <span id="time">05:00</span> minutes!</div>
      </section>

      <section class="content container-fluid">
<div class="row">
        <div class="col-lg-4 col-xs-6">
          <div class="small-box bg-aqua">
            <div class="inner">
              <h3><%= totalSolicitacoes %></h3>
              <p>Atendimentos Realizados</p>
            </div>
            <div class="icon">
              <i class="ion ion-bag"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
		<div class="col-lg-4 col-xs-6">
          <div class="small-box bg-yellow">
            <div class="inner">
              <h3><%= totalSolicitacoesPendentes %></h3>

              <p>Atendimentos Pendentes</p>
            </div>
            <div class="icon">
              <i class="ion ion-person-add"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
		
        <div class="col-lg-4 col-xs-6">
          <div class="small-box bg-green">
            <div class="inner">
              <h3><%= totalSolicitacoesFinalizado %></h3>

              <p>Atendimentos Finalizados</p>
            </div>
            <div class="icon">
              <i class="ion ion-stats-bars"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        
      </div>
        <div class="row">
          <div class="col-xs-12">
            <div class="box">
              <div class="box-header">
                <h3 class="box-title"><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                  Adicionar Nova  Demanda
                </button></h3>
              </div>
              <div class="box-body">
                <table id="example2" class="table table-bordered table-hover">
                  <thead>
                    <tr>
					  <th>Codigo</th>
                      <th>Status</th>
                      <th>Abertura</th>
                      <th>Cliente</th>
                      <th>Funcionário</th>
                      <th>Descrição</th>
					  <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <% solicitacoes.forEach(registros=> { %>
                      <tr>
						<td><%= registros.Codigo %></td>
						<% if(registros.Status =="Realizado"){ %>
						<td><a class="btn btn-info btn-xs status"><%= registros.Status %></a></td>
						<% }else if(registros.Status =="Pendente"){  %>
                        <td><a class="btn btn-warning btn-xs status"><%= registros.Status %></a></td>
						<% }else{ %>
						<td><a class="btn btn-default btn-xs status"><%= registros.Status %></a></td>
						<% } %>
                        <td><%= registros.Abertura %></td>
                        <td><%= registros.Cliente %></td>
                        <% if(registros.Funcionario!='' ){ %>
                          <td><a class="btn btn-success btn-flat btn-xs">
                              <%= registros.Funcionario %>
                            </a></td>
                          <% }else{ %>
                            <td><a class="btn btn-warning btn-flat btn-xs">Não Designado</a></td>
                            <% } %>
						  <td><%= registros.Descricao %></td>
						  <td><a href="/solicitacoes/<%= registros.id %>" type="button" class="btn btn-block btn-default btn-xs">Informações</a></td>
                      </tr>
                      <%}); %>


                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

      </section>
    </div>
    <footer class="main-footer">
      <!-- To the right -->
      <div class="pull-right hidden-xs">
        Anything you want
      </div>
      <strong>Copyright &copy; 2016 <a href="#">Company</a>.</strong> All rights reserved.
    </footer>

    <div class="control-sidebar-bg"></div>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Cadastrar Nova Solicitação</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form action="/addSolicitacao" method="post">
				<div class="form-group">
                  <label for="exampleInputEmail1">Descrição</label>
                  <input type="text" class="form-control" name="descricao" placeholder="infome aqui a Descrição ">
                </div>
				<div class="form-group">
					<label for="exampleFormControlSelect2">Cliente</label>                
					<select class="form-control" name="cliente">
						<% clientes.forEach(clientes=> { %>
							<option><%= clientes.Nome %></option>
						<% }) %>					
					</select>
				</div>
				
				<div class="form-group">
					<label for="exampleFormControlSelect2">Funcionário</label>                
					<select class="form-control" name="funcionario">
						<option>NÃO DESIGNADO</option>
						<% funcionarios.forEach(funcionarios=> { %>
							<option><%= funcionarios.Nome %></option>
						<% }) %>					
					</select>
				</div>
				<div class="form-group">
					<label for="exampleFormControlSelect2">Status</label>                
					<select class="form-control" name="status">
						<option>Aberto</option>
						<option>Pendente</option>
						<option>Finalizado</option>
					</select>
				</div>
              

              <div class="form-group">
                <label for="exampleFormControlTextarea1">Observação</label>
                <textarea class="form-control" name="observacao" rows="3"></textarea>
              </div>

              <button type="submit" class="btn btn-primary">Cadastrar</button>
            </form>
          </div>
          <div class="modal-footer">
            <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>-->
          </div>
        </div>
      </div>
    </div>


  </div>
  <script src="/../bower_components/jquery/dist/jquery.min.js"></script>
  <script src="/../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/../bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
  <script src="/../bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
  <script src="/../dist/js/adminlte.min.js"></script>
  <script>
  
	function startTimer(duration, display) {
		var timer = duration, minutes, seconds;
		setInterval(function () {
			minutes = parseInt(timer / 60, 10)
			seconds = parseInt(timer % 60, 10);

			minutes = minutes < 10 ? "0" + minutes : minutes;
			seconds = seconds < 10 ? "0" + seconds : seconds;

			display.text(minutes + ":" + seconds);

			if (--timer < 0) {
				timer = duration;
			}
			console.log(timer);
			if(timer==0){
				location.reload()
			}
			
		}, 1000);
	}

	jQuery(function ($) {
		var fiveMinutes = 60 * 1
		
		
		,
		display = $('#time');
		startTimer(fiveMinutes, display);
	});
    $(function () {
      $('#example2').DataTable({
        'paging': true,
        'lengthChange': false,
        'searching': true,
        'ordering': false,
        'info': true,
        'autoWidth': false,
        'language': {
          "emptyTable": "Nenhum registro encontrado",
          "info": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
          "infoEmpty": "Mostrando 0 até 0 de 0 registros",
          "infoFiltered": "(Filtrados de _MAX_ registros)",
          "infoThousands": ".",
          "loadingRecords": "Carregando...",
          "processing": "Processando...",
          "zeroRecords": "Nenhum registro encontrado",
          "search": "Pesquisar",
          "paginate": {
            "next": "Próximo",
            "previous": "Anterior",
            "first": "Primeiro",
            "last": "Último"
          },
          "aria": {
            "sortAscending": ": Ordenar colunas de forma ascendente",
            "sortDescending": ": Ordenar colunas de forma descendente"
          },
          "select": {
            "rows": {
              "_": "Selecionado %d linhas",
              "0": "Nenhuma linha selecionada",
              "1": "Selecionado 1 linha"
            },
            "1": "%d linha selecionada",
            "_": "%d linhas selecionadas",
            "cells": {
              "1": "1 célula selecionada",
              "_": "%d células selecionadas"
            },
            "columns": {
              "1": "1 coluna selecionada",
              "_": "%d colunas selecionadas"
            }
          },
          "buttons": {
            "copySuccess": {
              "1": "Uma linha copiada com sucesso",
              "_": "%d linhas copiadas com sucesso"
            },
            "collection": "Coleção  <span class=\"ui-button-icon-primary ui-icon ui-icon-triangle-1-s\"><\/span>",
            "colvis": "Visibilidade da Coluna",
            "colvisRestore": "Restaurar Visibilidade",
            "copy": "Copiar",
            "copyKeys": "Pressione ctrl ou u2318 + C para copiar os dados da tabela para a área de transferência do sistema. Para cancelar, clique nesta mensagem ou pressione Esc..",
            "copyTitle": "Copiar para a Área de Transferência",
            "csv": "CSV",
            "excel": "Excel",
            "pageLength": {
              "-1": "Mostrar todos os registros",
              "1": "Mostrar 1 registro",
              "_": "Mostrar %d registros"
            },
            "pdf": "PDF",
            "print": "Imprimir"
          },
          "autoFill": {
            "cancel": "Cancelar",
            "fill": "Preencher todas as células com",
            "fillHorizontal": "Preencher células horizontalmente",
            "fillVertical": "Preencher células verticalmente"
          },
          "lengthMenu": "Exibir _MENU_ resultados por página",
          "searchBuilder": {
            "add": "Adicionar Condição",
            "button": {
              "0": "Construtor de Pesquisa",
              "_": "Construtor de Pesquisa (%d)"
            },
            "clearAll": "Limpar Tudo",
            "condition": "Condição",
            "conditions": {
              "date": {
                "after": "Depois",
                "before": "Antes",
                "between": "Entre",
                "empty": "Vazio",
                "equals": "Igual",
                "not": "Não",
                "notBetween": "Não Entre",
                "notEmpty": "Não Vazio"
              },
              "moment": {
                "after": "Depois",
                "before": "Antes",
                "between": "Entre",
                "empty": "Vazio",
                "equals": "Igual",
                "not": "Não",
                "notBetween": "Não Entre",
                "notEmpty": "Não Vazio"
              },
              "number": {
                "between": "Entre",
                "empty": "Vazio",
                "equals": "Igual",
                "gt": "Maior Que",
                "gte": "Maior ou Igual a",
                "lt": "Menor Que",
                "lte": "Menor ou Igual a",
                "not": "Não",
                "notBetween": "Não Entre",
                "notEmpty": "Não Vazio"
              },
              "string": {
                "contains": "Contém",
                "empty": "Vazio",
                "endsWith": "Termina Com",
                "equals": "Igual",
                "not": "Não",
                "notEmpty": "Não Vazio",
                "startsWith": "Começa Com"
              }
            },
            "data": "Data",
            "deleteTitle": "Excluir regra de filtragem",
            "logicAnd": "E",
            "logicOr": "Ou",
            "title": {
              "0": "Construtor de Pesquisa",
              "_": "Construtor de Pesquisa (%d)"
            },
            "value": "Valor"
          },
          "searchPanes": {
            "clearMessage": "Limpar Tudo",
            "collapse": {
              "0": "Painéis de Pesquisa",
              "_": "Painéis de Pesquisa (%d)"
            },
            "count": "{total}",
            "countFiltered": "{shown} ({total})",
            "emptyPanes": "Nenhum Painel de Pesquisa",
            "loadMessage": "Carregando Painéis de Pesquisa...",
            "title": "Filtros Ativos"
          },
          "searchPlaceholder": "Digite um termo para pesquisar",
          "thousands": "."
        }
      })
    })
  </script>

</body>

</html>